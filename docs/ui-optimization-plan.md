# cgcut UI优化方案

## 一、OpenCut分析总结

### 技术栈对比
| 特性 | OpenCut | cgcut |
|------|---------|-------|
| 框架 | Next.js | React + Vite |
| 状态管理 | Zustand | Zustand |
| 拖拽 | 自研 | dnd-kit |
| 样式 | Tailwind | Tailwind |

### OpenCut核心组件
- `editor/timeline/index.tsx` - 时间轴主组件
- `timeline-constants.ts` - 缩放常量(MIN_ZOOM=0.3, MAX_ZOOM=5)
- `TimelineZoomControl` - 缩放控制器
- `ai-analyzer-panel.tsx` - AI分析面板

### cgcut当前组件
- `SimpleTimeline.tsx` - 时间轴(含视频预览)
- `ShotLibrary.tsx` - 素材库
- `ScriptBlockPanel.tsx` - 剧本分镜
- `AssetManagerModal.tsx` - 素材管理

## 二、界面优化方案

### 阶段1: 布局重构(本次实施)

**目标**: 参考OpenCut的编辑器布局，优化cgcut界面

**当前布局问题**:
1. 时间轴和预览窗口挤在一起
2. 素材库弹窗式交互不便
3. 分镜面板占用过多空间

**优化方案**:
```
+------------------------------------------------------------------+
|  顶部工具栏: 项目操作 | AI工具 | 导出                              |
+------------------------------------------------------------------+
|          |                              |                         |
|  剧本    |       视频预览区             |      素材库             |
|  分镜    |       (居中放大)             |      (常驻右侧)         |
|  面板    |                              |      - 搜索             |
|  (左侧)  |                              |      - 筛选             |
|          |                              |      - 缩略图           |
+----------+------------------------------+-------------------------+
|                      时间轴 (底部全宽)                            |
|  [轨道1] ████ ████ ████ ████                                     |
|  [播放控制] [缩放控制] [时间指示器]                               |
+------------------------------------------------------------------+
```

### 阶段2: 时间轴升级

**需实现**:
1. 缩放控制(滚轮+按钮)
2. 多轨道支持(视频轨+音频轨)
3. 时间刻度尺
4. 更好的clip拖拽体验

### 阶段3: 素材库增强

**需实现**:
1. 虚拟列表(支持大量素材)
2. 视频悬停预览
3. 拖拽到时间轴
4. 智能搜索增强

## 三、本次实施内容

### 3.1 创建新的编辑器布局组件

新建 `src/components/EditorLayout.tsx`:
- 三栏布局(左-中-右)
- 底部时间轴
- 可调整面板大小

### 3.2 重构时间轴

修改 `SimpleTimeline.tsx`:
- 分离预览和时间轴
- 添加缩放状态
- 添加时间刻度

### 3.3 优化素材库

修改 `ShotLibrary.tsx`:
- 改为常驻右侧面板
- 添加快速搜索
- 保留现有CLIP召回功能

## 四、保留功能清单

以下功能必须保留:
- [x] CLIP素材召回
- [x] 分镜AI拆解
- [x] 素材匹配替换
- [x] 视频预览播放
- [x] 时间轴拖拽排序
- [x] 项目保存/加载
- [x] 视频导出

## 五、实施顺序

1. 创建EditorLayout.tsx布局框架
2. 将现有组件嵌入新布局
3. 调整样式适配
4. 验证所有功能正常
