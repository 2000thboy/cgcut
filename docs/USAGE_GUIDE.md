# CGCUT 使用指南

## 新增功能

### 1. 视频预览播放器

时间轴上方现在集成了完整的视频预览播放器，提供以下功能：

- **实时预览**：显示当前播放位置对应的视频内容
- **播放控制**：
  - ▶/⏸ 播放/暂停按钮
  - ⏹ 停止按钮（返回开始）
  - 时间显示（当前时间/总时长）
  - 可拖动的进度条
- **视频显示**：
  - 真实视频：显示导入的视频文件
  - 占位符：使用彩色背景和镜头信息展示

### 2. 素材导入功能

#### 导入视频素材

1. 在右侧"素材库"面板，点击 **"📁 导入视频素材"** 按钮
2. 选择一个或多个视频文件（支持 mp4, webm, mov 等格式）
3. 系统会自动：
   - 获取视频时长
   - 创建本地预览链接
   - 添加到素材库
4. 导入的素材会立即显示在素材库中

#### 导入剧本文件

1. 在顶部工具栏，点击 **"导入剧本"** 按钮
2. 选择 JSON 格式的剧本文件
3. 剧本段落会自动加载到左侧面板

剧本 JSON 格式示例：
```json
[
  {
    "id": "block_001",
    "scene": "INT. 卧室 - 夜晚",
    "text": "主角躺在床上，辗转反侧。窗外传来微弱的雨声。",
    "emotion": "焦虑",
    "expected_duration": 8.0
  }
]
```

### 3. 素材管理功能

在素材库中，每个素材卡片提供以下操作：

- **✏️ 编辑标签**：修改镜头名称
- **🎭 修改情绪**：更改情绪标签（焦虑、紧张、平静、恐惧、释然）
- **× 删除**：移除素材

### 4. 项目导出功能

点击顶部的 **"导出项目"** 按钮，可以将整个项目（包括剧本、时间轴、素材信息）导出为 JSON 文件。

注意：导出的文件不包含实际视频文件，只保存视频路径引用。

## 使用流程

### 典型工作流程

1. **准备素材**
   - 点击"导入剧本"导入剧本文件
   - 点击"导入视频素材"导入视频文件

2. **编辑时间轴**
   - 从左侧选择剧本段落
   - 从右侧素材库选择合适的镜头
   - 拖放镜头到时间轴上

3. **预览和调整**
   - 点击播放按钮预览效果
   - 调整镜头顺序（拖拽）
   - 修改镜头时长（裁剪）
   - 替换不满意的镜头

4. **保存项目**
   - 点击"保存项目"保存到浏览器本地存储
   - 或点击"导出项目"导出为文件

## 快捷操作

- **点击时间轴刻度**：跳转到指定时间
- **点击进度条**：快速定位播放位置
- **鼠标悬停素材卡片**：自动播放视频预览
- **拖拽镜头卡片**：调整时间轴顺序

## 注意事项

1. **视频格式支持**：
   - 推荐使用 MP4 格式（H.264 编码）
   - 浏览器支持的其他格式：WebM, OGG

2. **性能考虑**：
   - 大文件可能加载较慢
   - 建议使用压缩后的预览文件

3. **数据持久化**：
   - "保存项目"仅保存到浏览器 localStorage
   - 清除浏览器数据会丢失项目
   - 重要项目请使用"导出项目"备份

4. **浏览器兼容性**：
   - 推荐使用 Chrome、Edge 或 Firefox 最新版本
   - Safari 可能存在兼容性问题

## 常见问题

**Q: 导入的视频不显示？**
A: 检查视频格式是否为浏览器支持的格式，或尝试转换为 MP4。

**Q: 播放器不工作？**
A: 确保时间轴中至少有一个镜头片段。

**Q: 如何删除导入的素材？**
A: 鼠标悬停在素材卡片上，点击右上角的 "×" 按钮。

**Q: 可以同时预览多个视频吗？**
A: 播放器一次只显示一个镜头，但会自动切换播放时间轴上的所有镜头。
