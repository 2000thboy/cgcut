<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>VLM 视频描述服务</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen text-gray-100" style="background:#111827">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <h1 class="text-3xl font-bold text-orange-400 mb-8">VLM 视频描述服务</h1>
        <div class="bg-gray-800 rounded-lg p-6 mb-6 border border-gray-700">
            <h2 class="text-xl font-semibold mb-4">服务状态</h2>
            <div id="status" class="text-green-400">加载中...</div>
        </div>
        <div class="bg-gray-800 rounded-lg p-6 mb-6 border border-gray-700">
            <h2 class="text-xl font-semibold mb-4">单个视频描述</h2>
            <input type="text" id="video-path" class="w-full px-4 py-2 bg-gray-900 border border-gray-600 rounded text-gray-100 mb-4" placeholder="输入视频路径">
            <button onclick="describeVideo()" class="px-6 py-2 bg-orange-600 text-white rounded">生成描述</button>
            <div id="result" class="mt-4 text-gray-300"></div>
        </div>
    </div>
    <script>
        fetch('/vlm').then(r=>r.json()).then(d=>{document.getElementById('status').textContent='模型:'+d.model+' 设备:'+d.device});
        function describeVideo(){
            const p=document.getElementById('video-path').value;
            document.getElementById('result').textContent='处理中...';
            fetch('/vlm/describe',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({file_path:p})})
            .then(r=>r.json()).then(d=>{document.getElementById('result').textContent=d.description||d.detail})
            .catch(e=>{document.getElementById('result').textContent='错误:'+e});
        }
    </script>
</body>
</html>
